<style>
  .svgg{
    display:inline-block;
    margin-right: 6px;
    margin-bottom: 5px;
    cursor: pointer;
    border: 3px solid white;
  }
  .svgg:hover, .svgg:hover{
      color: #9A1A4A;
  }
  svg:hover {
    fill: red;
  }
  
  .blocks{
    border: 1.5px solid #65647c;
    border-radius: 15px;
    display: inline-block;
    padding: 3px 10px;
    margin-right: 5px;
    margin-bottom: 5px;
    color: #6f6d9d;
    font-size: 14px;
    cursor:pointer;
  }
  .blocks:hover { 
    background-color: rgb(175,175,214);
    color:white;
  }
  .blockLight { 
    background-color: rgb(175,175,214);
    color:white !important;
  }

    .sublocks{
    border: 1.5px solid #65647c;
    border-radius: 15px;
    display: inline-block;
    padding: 3px 10px;
    margin-right: 5px;
    margin-bottom: 5px;
    color: #6f6d9d;
    font-size: 14px;
    cursor:pointer;
  }
  .sublocks:hover { 
    background-color: rgb(175,175,214);
    color:white;
  }
  .sublocksLight { 
    background-color: rgb(175,175,214);
    color:white;
  }
  
  .blockInput{
    height: 28px;
    width: 145px;
    border: 1.5px solid #65647c;
    border-radius: 15px;
    display: inline-block;
    padding: 3px 10px;
    color: #6f6d9d;
    font-size: 14px;
    cursor:pointer;
    text-align: center;
  }
  .cheng {
      border: 3px solid #fe8732;
  }
  .growl-notification{
    pointer-events: none !important;
  }
</style>





<div id="p8_content">
  <h2>请先创建你的个人简介</h2>
  <div class="poll-form">
    <p>请输入你的拼音首字母
</p>
    注：在给你的纸条上找到你的拼音首字母。不区分大小写。
    <input id="p8a" maxlength="4" type="text" oninput="value=value.toUpperCase()"  onkeyup="this.value=this.value.replace(/[^a-zA-Z]/g,'')" style="background-color:#e1e1e1;color:#65647c;height:49px;width:100px;"/>&emsp;
    <span id="p8a_text"></span>
  </div>
  <br>
  <div class="poll-form">
    <p>请选择你的性别</p>
    <select id="p8b" style="background-color:#e1e1e1;height:49px;width:85px;color:#65647c;border-radius:5px">
      <option value="点击选择">点击选择</option>
      <option value="男">男</option>
      <option value="女">女</option>
    </select> 
  </div>
  <br>
  <div class="poll-form">
    <p>请选择你的年龄</p>
    <select id="p8c" style="background-color:#e1e1e1;height:49px;width:85px;color:#65647c;border-radius:5px">
      <option value="点击选择">点击选择</option>
      <option value="9">9</option>
      <option value="10">10</option>
      <option value="11">11</option>
      <option value="12">12</option>
      <option value="13">13</option>
      <option value="14">14</option>
    </select> 
  </div>
  <br>
  <div class="poll-form">
    <p>请为自己选择一个头像 </p>
    <div id="avat"></div><br>
    <div  style="float:right;"> 
      <span id="p9_text"></span>&emsp;<button id="p9d" style="margin-right: 20px;" class="disabled">提交</button>
    </div><br><br>
  </div>
  <br>

</div>

<!--  
<div id="p9_content" style="display:none">
  <p>
    page - 9
  </p><br>
  <div class="poll-form">
    <p>点击选择一个头像</p> 
    这个头像将在“介绍环节”中代表你。<br><br>
    <div id="avat"></div>
    <br>
    <button id="reset">重置</button>
    <div  style="float:right;"> 
      <span id="p9_text"></span>&emsp;<button id="p9d" style="margin-right: 20px;" class="disabled">提交</button>
    </div>
    
  </div>
</div>
-->


<div id="p10_content" style="display:none">
  <h2>请选择五个你愿意分享的主题，向其他同学介绍自己</h2> 
  <div class="poll-form">
    <br>
      <a class="blocks" id="xg">性格</a>
      <a class="blocks" id="ah">爱好</a>
      <a class="blocks" id="gz">理想工作</a>
      <a class="blocks" id="gs">最喜欢的歌手</a>
      <a class="blocks" id="yy">最喜欢的演员</a>
      <a class="blocks" id="wy">最喜欢的网络游戏</a>
      <a class="blocks" id="su">最喜欢的书</a>
      <a class="blocks" id="dj">最喜欢的电视节目或电影</a>
      <a class="blocks" id="ls">最喜欢的食物或零食</a>
      <a class="blocks" id="sw">最不喜欢的食物</a>
      <a class="blocks" id="dw">最喜欢的动物</a> 
    <br>
    <button style="visibility:hidden">提交</button><span id="stext"></span>
    <button id="p10d" style="float:right;margin-right: 20px;" class="disabled">提交</button>
    
  </div>
</div>
<div id="p11_content" style="display:none">
  <div class="poll-form">
    <p><b>请为每个主题选择1个最能代表你/最符合你的答案</b></p> 
    <div id="subxg" style="display:none" value="我的性格"><b>性格</b><br><br><a class="sublocks">开朗</a><a class="sublocks">活泼</a><a class="sublocks">有点暴躁</a><a class="sublocks">阳光</a><a class="sublocks">友善</a><!-- <a class="sublocks">温和</a><a class="sublocks">幽默</a><a class="sublocks">乐于助人</a><a class="sublocks">有点爱玩儿</a><a class="sublocks">有耐心</a><a class="sublocks">易怒</a><a class="sublocks">胆小</a><a class="sublocks">大方</a><a class="sublocks">不太爱说话</a><a class="sublocks">爱哭</a> --> <input class="blockInput" value="其他, 在此处书写"/><br><br></div>
    <div id="subah" style="display:none" value="我的爱好是"><b>爱好</b><br><br><a class="sublocks">画画</a><a class="sublocks">玩手机、玩电脑</a><a class="sublocks">打篮球</a><a class="sublocks">跑步</a><a class="sublocks">唱歌</a><!-- <a class="sublocks">跳舞</a><a class="sublocks">看书</a><a class="sublocks">听音乐</a><a class="sublocks">看电视</a><a class="sublocks">跳绳</a><a class="sublocks">听歌</a><a class="sublocks">踢足球</a><a class="sublocks">打乒乓球</a><a class="sublocks">练字</a><a class="sublocks">下棋</a><a class="sublocks">和同学一起玩</a><a class="sublocks">打羽毛球</a> --> <input class="blockInput" value="其他, 在此处书写"/><br><br></div>
    <div id="subgz" style="display:none" value="我理想工作是"><b>理想工作</b><br><br><a class="sublocks">医生</a><a class="sublocks">教师</a><a class="sublocks">歌手</a><a class="sublocks">老板</a><a class="sublocks">军人</a><!-- <a class="sublocks">舞蹈老师</a><a class="sublocks">科学家</a><a class="sublocks">宇航员</a><a class="sublocks">演员</a><a class="sublocks">画家</a><a class="sublocks">运动员</a><a class="sublocks">厨师</a><a class="sublocks">发明家</a><a class="sublocks">主播</a><a class="sublocks">作家</a><a class="sublocks">程序员</a>--> <input class="blockInput" value="其他, 在此处书写"/><br><br></div>
    <div id="subgs" style="display:none" value="我最喜欢的歌手是"><b>最喜欢的歌手</b><br><br><a class="sublocks">宋亚轩</a><a class="sublocks">王源</a><a class="sublocks">邓紫棋</a><a class="sublocks">刘耀文</a><a class="sublocks">丁程鑫</a><!-- <a class="sublocks">鞠婧祎</a><a class="sublocks">赵露思</a><a class="sublocks">华晨宇</a><a class="sublocks">肖战</a><a class="sublocks">程潇</a><a class="sublocks">张真源</a><a class="sublocks">周杰伦</a><a class="sublocks">王俊凯</a><a class="sublocks">七叔</a><a class="sublocks">等什么君</a><a class="sublocks">旺仔小乔</a> --> <input class="blockInput" value="其他, 在此处书写"/><br><br></div>
    <div id="subyy" style="display:none" value="我最喜欢的演员是"><b>最喜欢的演员</b><br><br><a class="sublocks">赵露思</a><a class="sublocks">程潇</a><a class="sublocks">鞠婧祎</a><a class="sublocks">迪丽热巴</a><a class="sublocks">吴京</a><!-- <a class="sublocks">袁冰妍</a><a class="sublocks">王宝强</a><a class="sublocks">肖战</a><a class="sublocks">李小龙</a><a class="sublocks">宋小宝</a><a class="sublocks">成龙</a><a class="sublocks">丁程鑫</a><a class="sublocks">王一博</a><a class="sublocks">杨颖</a><a class="sublocks">贾玲</a><a class="sublocks">马嘉祺</a><a class="sublocks">关晓彤</a><a class="sublocks">贺峻霖</a> --> <input class="blockInput" value="其他, 在此处书写"/><br><br></div>
    <div id="subwy" style="display:none" value="我最喜欢的网络游戏是"><b>最喜欢的网络游戏</b><br><br><a class="sublocks">《和平精英》</a><a class="sublocks">《王者荣耀》</a><a class="sublocks">《迷你世界》</a><a class="sublocks">《我的世界》</a><a class="sublocks">《绝地求生》</a><!-- <a class="sublocks">球球大作战</a><a class="sublocks">穿越火线</a><a class="sublocks">贪吃蛇</a><a class="sublocks">英雄联盟</a><a class="sublocks">战地2042</a><a class="sublocks">樱花校园模拟器</a><a class="sublocks">迪士尼梦之旅</a><a class="sublocks">反恐精英</a><a class="sublocks">火柴人</a><a class="sublocks">4399小游戏</a> --> <input class="blockInput" value="其他, 在此处书写"/><br><br></div>
    <div id="subsu" style="display:none" value="我最喜欢的书是"><b>最喜欢的书</b><br><br><a class="sublocks">《西游记》</a><a class="sublocks">《三国演义》</a><a class="sublocks">《查理九世》</a><a class="sublocks">《父与子》</a><a class="sublocks">《中国民间故事》</a><!-- <a class="sublocks">水浒传</a><a class="sublocks">安徒生童话</a><a class="sublocks">斗罗大陆</a><a class="sublocks">十万个为什么</a><a class="sublocks">寄小读者</a><a class="sublocks">阿衰</a><a class="sublocks">红楼梦</a><a class="sublocks">装在口袋里的爸爸</a><a class="sublocks">青铜葵花</a><a class="sublocks">非洲民间故事</a><a class="sublocks">哈利波特</a><a class="sublocks">童年</a><a class="sublocks">爆笑校园</a><a class="sublocks">海底两万里</a><a class="sublocks">云边有个小卖部</a> --> <input class="blockInput" value="其他, 在此处书写"/><br><br></div>
    <div id="subdj" style="display:none" value="我最喜欢的电视节目或电影是"><b>最喜欢的电视节目或电影</b><br><br><a class="sublocks">《斗罗大陆》</a><a class="sublocks">《王牌对王牌》</a><a class="sublocks">《长津湖》</a><a class="sublocks">《你微笑时很美》</a><a class="sublocks">《战狼》</a><!-- <a class="sublocks">西游记</a><a class="sublocks">奔跑吧</a><a class="sublocks">白蛇传</a><a class="sublocks">千古玦尘</a><a class="sublocks">熊出没</a><a class="sublocks">哪吒</a><a class="sublocks">小猪佩奇</a><a class="sublocks">青春环游记</a><a class="sublocks">传闻中的陈芊芊</a><a class="sublocks">念念</a><a class="sublocks">嘉南传</a><a class="sublocks">如意芳霏</a><a class="sublocks">海绵宝宝</a><a class="sublocks">三国演义</a> --> <input class="blockInput" value="其他, 在此处书写"/><br><br></div>
    <div id="subls" style="display:none" value="我最喜欢的食物或零食是"><b>最喜欢的食物或零食</b><br><br><a class="sublocks">薯片</a><a class="sublocks">可乐、雪碧</a><a class="sublocks">汉堡</a><a class="sublocks">冰淇淋、雪糕</a><a class="sublocks">辣条</a><!-- <a class="sublocks">糖</a><a class="sublocks">肉</a><a class="sublocks">三明治</a><a class="sublocks">面条</a><a class="sublocks">火锅</a><a class="sublocks">巧克力</a><a class="sublocks">面包</a><a class="sublocks">土豆</a><a class="sublocks">热干面</a><a class="sublocks">牛肉面</a><a class="sublocks">饼干</a><a class="sublocks">蛋糕</a><a class="sublocks">牛排、鸡排</a><a class="sublocks">水果</a><a class="sublocks">坚果</a> --> <input class="blockInput" value="其他, 在此处书写"/><br><br></div>
    <div id="subsw" style="display:none" value="我最不喜欢的食物是"><b>最不喜欢的食物</b><br><br><a class="sublocks">味道过淡的食物</a><a class="sublocks">胡萝卜</a><a class="sublocks">土豆</a><a class="sublocks">香菜</a><a class="sublocks">西红柿</a><!-- <a class="sublocks">黄瓜</a><a class="sublocks">苦瓜</a><a class="sublocks">冬瓜</a><a class="sublocks">鱼</a><a class="sublocks">辣椒</a><a class="sublocks">软糖</a><a class="sublocks">茄子</a><a class="sublocks">肥肉</a><a class="sublocks">洋葱</a><a class="sublocks">芹菜</a> --> <input class="blockInput" value="其他, 在此处书写"/><br><br></div>
    <div id="subdw" style="display:none" value="我最喜欢的动物是"><b>最喜欢的动物</b><br><br><a class="sublocks">小狗</a><a class="sublocks">小猫</a><a class="sublocks">兔子</a><a class="sublocks">熊猫</a><a class="sublocks">老虎</a><!-- <a class="sublocks">仓鼠</a><a class="sublocks">狮子</a><a class="sublocks">松鼠</a><a class="sublocks">蛇</a><a class="sublocks">牛</a><a class="sublocks">鸟</a><a class="sublocks">金鱼</a><a class="sublocks">猴子</a><a class="sublocks">小羊</a><a class="sublocks">考拉</a> --> <input class="blockInput" value="其他, 在此处书写"/><br><br></div>
    <br>
    <button style="visibility:hidden">提交</button>&emsp;<span id="sublocktext"></span>
    <button id="p11d" style="float:right;margin-right: 20px;" class="disabled">提交</button>
    
  </div>
</div>
<div id="p13_content" style="display:none">
  <h2>稍后，你将与其他同学建立在线连接</h2> 
  <div class="poll-form">
    <br>
    <b>建立连接前，请先观看“新手引导”熟悉本网站。</b>
    <br>
    <button style="visibility:hidden">继续</button>
    <button id="p13d" style="float:right;margin-right: 20px;">开始新手引导</button>

  </div>
</div>
<div id="p14_content" style="display:none">
  <h2>“认识人网”新手引导</h2> 
 
    <button style="float:left;margin-bottom: 30px;box-shadow: 2px 2px 0px 1px rgb(255 189 90);" id="resee">重新观看“新手引导”</button>
    <button id="p14d" style="float:right;margin-bottom: 30px;">正式开始</button><br><br>
      <div id="root">
        <div id="mb" style=" position: absolute;background:rgb(82 83 88 / 56%);width:220px;height:220px;border-radius:5px;z-index:11111"></div>
        <div class="item" style="position: relative;" id="yitem">
          <div class="userInfo">
            <a class="interava"></a>
            <span class="username" id="yname">PDD</span><span class="self">你自己</span> 
          </div>
          <div class="textInfo" id="ytext">
            ....
          </div>
          <div class="Btn" id="ybtn"><div style="float:left">赞&nbsp;</div><span class="cnt" id="up8" style="color:red">2</span>
            <div style="float:right">踩&nbsp;<span class="cnt" id="down8">0</span></div></div>

        </div>
        


        <div id="itor"></div>

      </div>
        <div style="clear:both"></div>

      <div id="mailbox"></div>
      <div id="popzan"></div>

  
</div>
<div id="p15_content" style="display:none">
  <h2>建立连接中...</h2> 
  <div class="poll-form">
    <br>
    请稍等，你正在与其他学生建立连接。
    <br>
    <div id="p15_img"><img width="100" src="https://cdn.jsdelivr.net/gh/TianZonglin/tuchuang/img/avv.gif"/></div>
    <br>
    <span style="color:green" id="p15_text"></span>
    <button style="visibility:hidden">继续</button>
    <button id="p15d" class="disabled" style="float:right;margin-right: 20px;">继续</button>
  </div>
</div>

 



<div id="2ndiv"></div>

<script>
 
  let INTRODUCTION = new Array();
  
  //
  
  //$("#p8b").blur(function(){
  //  let hvalue = $("#hidevalue").text();
  //  if($(this).val()=="男"){
  //    $("#hidevalue").text(hvalue+",nan")
  //  }else if($(this).val()=="女"){
  //    
  //  }
  //});

 
  
  $("#p9d").click(function(){
    $("#hidejsons").append("\"Page2Time\":\""+ (new Date().getTime() - $("#hidestart").val()) +"ms\",");
    $("#hidestart").val(new Date().getTime());
    
    $("#p8_content").hide();
    $("#p10_content").show();
    setTimeout(() => window.scrollTo(0,0), 150);
    INTRODUCTION[0] = $("#p8a").val();
    INTRODUCTION[1] = "大家好！我是一个五年级的"+$("#p8b").val()+"生。我今年"+$("#p8c").val()+"岁了。"
    INTRODUCTION[2] = $(".cheng").attr("value");
    console.log(INTRODUCTION[2]);
  });
  


  
  let selectNum = 0;
  let myset = new Set([]);
  $(".blocks").click(function(){
    
    if($(this).hasClass("blockLight")){
      selectNum -= 1;
      $(this).val("");
      $(this).toggleClass("blockLight");
      myset.delete($(this).attr("id"));
    }else if(selectNum < 5){
      selectNum += 1;
      $(this).toggleClass("blockLight");
      myset.add($(this).attr("id"));
    }
    if(selectNum === 5){
      $("#stext").html("<span style='color:green'>选择完毕，点击提交！</span>");
      $("#p10d").removeClass("disabled");
    }else{
      $("#stext").html("");
      $("#p10d").addClass("disabled");
    }
  });
 
  
  $("#p10d").click(function(){
    
    $("#hidejsons").append("\"Page3Time\":\""+ (new Date().getTime() - $("#hidestart").val()) +"ms\",");
    $("#hidestart").val(new Date().getTime());
    
    
    
    $("#p10_content").html("");
    $("#p11_content").show();
    setTimeout(() => window.scrollTo(0,0), 150); 
    console.log(myset);
    myset.forEach (function(value) {
       $("#sub"+value).show();
    });
  });
  
  let subselectNum = 0;
  let obj = [];
  
  $(".blockInput").focus(function () {
    $(this).val("");

  }).blur(function () {
    if($(this).val()==""){
      $(this).val("其他, 在此处书写");
      $(this).removeClass("blockLight");
    }
    if($("#"+$(this).parent().attr("id")+" > .blockLight").length == 0 && $(this).val()!="" && $(this).val()!="其他, 在此处书写"){
      subselectNum += 1;
      $(this).addClass("blockLight");
      $(this).siblings().removeClass("blockLight"); 

    }else{
      if($(this).hasClass("blockLight")){
        //subselectNum -= 1;
        //$(this).removeClass("blockLight");
      }else{
        if($(this).val()!="其他, 在此处书写"){
          $(this).addClass("blockLight");
          $(this).siblings().removeClass("blockLight");  
        }
      }
    }
    if(/^([\u4e00-\u9fa5]{1,16})$/gi.test($(this).val())){  
      console.log(/^([\u4e00-\u9fa5]{1,16})$/gi.test($(this).val()));
      $(this).addClass("blockLight");
      $(this).siblings().removeClass("blockLight"); 
    }else if($(this).val()!="其他, 在此处书写"){
      subselectNum -= 1;
      $(this).val("其他, 在此处书写");
      $(this).removeClass("blockLight");
    }
    if(subselectNum === 5){
      $("#sublocktext").html("<span style='color:green'>选择完毕，点击提交！</span>");
      $("#p11d").removeClass("disabled");
    }else{
      $("#sublocktext").html("");
      $("#p11d").addClass("disabled");
    }
    console.log(subselectNum);
  });
  
  
  $(".sublocks").click(function(){
    if($("#"+$(this).parent().attr("id")+" > .blockLight").length == 0){
      subselectNum += 1;
      $(this).addClass("blockLight");
      $(this).siblings().removeClass("blockLight"); 

    }else{
      if($(this).hasClass("blockLight")){
        subselectNum -= 1;
        $(this).removeClass("blockLight");
      }else{
        $(this).addClass("blockLight");
        $(this).siblings().removeClass("blockLight"); 
      }
    }
    if(subselectNum === 5){
      $("#sublocktext").html("<span style='color:green'>选择完毕，点击提交！</span>");
      $("#p11d").removeClass("disabled");
    }else{
      $("#sublocktext").html("");
      $("#p11d").addClass("disabled");
    }
  });
  

 

  
  $("#p11d").click(function(){
    
    $("#hidejsons").append("\"Page4Time\":\""+ (new Date().getTime() - $("#hidestart").val()) +"ms\",");
    $("#hidestart").val(new Date().getTime());
    
    $("#p11_content").hide();
    $("#p13_content").show();
    setTimeout(() => window.scrollTo(0,0), 150);
    INTRODUCTION[3] = $(".blockLight").map(function () { return ($(this).parent().attr("value")); }).get().join(",");
    INTRODUCTION[4] = $(".blockLight").map(function () { return this.value; }).get().join(",");
 
  });
          
       
  let STEPS = 0;
          
  function driversTest(){
    
      let driver = new Driver({
        allowClose: true, // Whether clicking on overlay should close or not
        overlayClickNext: true, // Should it move to next step on 
        doneBtnText: '知道啦', // Text on the final button
        closeBtnText: '关闭', // Text on the close button for this step
        nextBtnText: '知道啦', // Next button text for this step
        prevBtnText: '返回', // Previous button text for this step
        showCloseButton: false, // Do not show control buttons in footer
        keyboardControl: false,
        animate: false,
        onNext: (Element) => {
          $("#mb").css("height",$("#yitem").css("height"));
          STEPS++;
          $(".driver-prev-btn").hide();
          if (!checkFull()) {
            $(":not(#driver-popover-item)").css("pointer-events","auto");
          }
          
        },      // Called when moving to next step on any step
        onReset: (Element) => {
          $(":not(#driver-popover-item)").css("pointer-events","auto");
        
        }
      });
      driver.defineSteps([
        {
          element: '.item',
          popover: {
            className: 'first-step-popover-class',
            title: '你的个人简介',
            position: 'right'
          }
        },
        {
          element: '#item2',
          popover: {

            className: 'first-step-popover-class',
            title: '其他学生的个人简介',
            position: 'right'
          }
        },
        {
          element: '.Btns',
          popover: {
            className: 'first-step-popover-class',
            title: '如果你<span style="color:red">喜欢</span>某个人的简介，就点<span style="color:red">“赞”</span>键；如果你<span style="color:red">不喜欢</span>某个人的简介，就点<span style="color:red">“踩”</span>键',
            position: 'right'
          }
        },
        {
          element: '.item',
          popover: {
            className: 'first-step-popover-class',
            title: '其他学生也能看到你的个人简介，也能给你点“赞”或“踩”',
            position: 'right'
          }
        },
        {
          element: '.Btns',
          popover: {

            className: 'first-step-popover-class',
            title: '其他学生收到的“赞”和“踩”数',
            position: 'right'
          }
        },
        {
          element: '.Btn',
          popover: {
            className: 'first-step-popover-class',
            title: '你收到的“赞”、“踩”数',
            position: 'right'
          }
        },
        {
          element: '.growl-notification--success',
          popover: {
            showCloseButton: false,
            title: '你和其他学生收到赞和踩时，都会在这里通知',
            position: 'top'
          }
        },
        {
          element: '.r1',
          popover: {
            title: '你只有三分钟的时间给其他学生点赞和踩',
            position: 'left'
          }
        },
        {
          element: '.r2',
          popover: {
            title: '实时动态展现所有学生的赞数排行，橙色突出显示你的排行',
            position: 'left'
          }
        },
        {
          element: '#resee',
          popover: {
            showCloseButton: false,
            title: '点击此键可以再次观看“新手引导”教程',
            position: 'bottom'
          }
        },
        {
          element: '#p14d',
          popover: {
            showCloseButton: false,
            title: '若已了解此页面，点击进入“正式开始”',
            position: 'bottom'
          }
        },
      ]);
      driver.start(); 
      $(":not(#driver-popover-item)").css("pointer-events","none");
  }
  
  
  function checkFull() {
    var isFull = window.fullScreen || document.webkitIsFullScreen || document.msFullscreenEnabled;
    //to fix : false || undefined == undefined
    if (isFull === undefined) {isFull = false;}
    return isFull;
  }
  
  function driversNormal(){
    
      let driver = new Driver({
        allowClose: true,
        opacity: 1,
        overlayClickNext: true, // Should it move to next step on overlay click
        doneBtnText: '知道啦', // Text on the final button
        closeBtnText: '关闭', // Text on the close button for this step
        nextBtnText: '知道啦', // Next button text for this step
        prevBtnText: '', // Previous button text for this step
        showCloseButton: false, // Do not show control buttons in footer
        keyboardControl: false,
        animate: false,
        onNext: (Element) => {
         $("#mb").css("height",$("#yitem").css("height"));
          STEPS++;
          $(".driver-prev-btn").hide();
          if (!checkFull()) {
            $(":not(#driver-popover-item)").css("pointer-events","auto");
          }
        },      // Called when moving to next step on any step
        onReset: (Element) => {
          $(":not(#driver-popover-item)").css("pointer-events","auto");
        
        }
      });
      driver.defineSteps([
        {
          element: '#mb',
          popover: {
            className: 'first-step-popover-class',
            title: '你的个人简介',
            position: 'right'
          }
        },
        {
          element: '#item2',
          popover: {

            className: 'first-step-popover-class',
            title: '其他学生的个人简介',
            position: 'right'
          }
        },
        {
          element: '.Btns',
          popover: {
            className: 'first-step-popover-class',
            title: '如果你<span style="color:red">喜欢</span>某个人的简介，就点<span style="color:red">“赞”</span>键；如果你<span style="color:red">不喜欢</span>某个人的简介，就点<span style="color:red">“踩”</span>建',
            position: 'right'
          }
        },
        {
          element: '#mb',
          popover: {
            className: 'first-step-popover-class',
            title: '其他学生不能看到你的个人简介，不能给你点“赞”或“踩”',
            position: 'right'
          }
        },
        {
          element: '.Btns',
          popover: {

            className: 'first-step-popover-class',
            title: '其他学生收到的“赞”和“踩”数',
            position: 'right'
          }
        },
        {
          element: '.growl-notification--success',
          popover: {
            showCloseButton: false,
            title: '其他学生收到赞和踩时，都会在这里通知',
            position: 'top'
          }
        },
        {
          element: '.r1',
          popover: {
            title: '你只有三分钟的时间给其他学生点赞和踩',
            position: 'left'
          }
        },
        {
          element: '.r2',
          popover: {
            title: '实时动态展现所有学生的赞数排行',
            position: 'left'
          }
        },
        {
          element: '#resee',
          popover: {
            showCloseButton: false,
            title: '点击此键可以再次观看“新手引导”教程',
            position: 'bottom'
          }
        },
        {
          element: '#p14d',
          popover: {
            showCloseButton: false,
            title: '若已了解此页面，点击进入“介绍环节”',
            position: 'bottom'
          }
        },
      ]);
      driver.start(); 
      $(":not(#driver-popover-item)").css("pointer-events","none");
  }
  
  
  
  
  
  
  
  
  $("#resee").click(function(){
    
    if($("#hidevalue").text().split(",")[0]=="normal"){
      driversNormal();
    }else{
      driversTest();
    }
    
    
  });
  
 
  
  $("#p13d").click(function(){
    $("#p13_content").hide();
    $("#p14_content").show();
    
    $("#hidejsons").append("\"Page5Time\":\""+ (new Date().getTime() - $("#hidestart").val()) +"ms\",");
    $("#hidestart").val(new Date().getTime());
    
    
    let yname = INTRODUCTION[0];
    let introTextFinal = INTRODUCTION[1];
    let heads = INTRODUCTION[2].split(";");
    let yoursvg = Avataaars.create({
        width: 50,
        top: heads[0],
        hairColor: heads[1],
        clothing: heads[2],
        clothingColor: heads[3],
        eyes: heads[4],
        mouth: heads[5],
        skin:"yellow",
        background: heads[6]
    });
    let m = INTRODUCTION[3].split(",");
    let c = INTRODUCTION[4].split(",");
    for(let i=0;i<m.length;i++){
      if(i==m.length-1)
        introTextFinal += m[i]+c[i]+"。";
      else
        introTextFinal += m[i]+c[i]+"。";
    }
    $(".interava").html(yoursvg);
    $("#yname").text(yname);
    $("#ytext").text(introTextFinal);
    
    document.body.style.overflow='hidden';       
    document.addEventListener("touchmove", function(e){e.preventDefault();},{passive:false});
    
    setTimeout(() => window.scrollTo(0,0), 150);  
    GrowlNotification.notify({
      description: "<span class='big'>LYP 收到了一个赞！</span>",
      type: 'success',
      position: 'bottom-left',
      closeWith: 'button',
      closeTimeout: 0
    });  
    let s = Avataaars.create({width:52}); //////
    GrowlNotification.notify({
      description: "<div style='float:left;width:60px'>"+s+"</div><div style='float:left;width:300px'><span class='big'>(SY)对你说：我挺喜欢这个认识人网的。</span></div>",
      type: 'info',
      position: 'bottom-right',
      closeWith: 'button',
      closeTimeout: 0
    });
    $(".content2").css("margin-top","154px");
    $(".content2").css("visibility","visible");
    $(".r3").css("visibility","hidden");
    $(".content0").css("margin-top","154px");
    $(".content0").css("visibility","visible");
    $("#msgnum").html("<span style='color:red'>1</span>");
    $("#leftTime").text("3:00");
    $.getJSON("fakers.json",function(e){
      let str = "";
      
      let rky = "";
      if($("#hidevalue").text().split(",")[0]!="normal"){
        $('.order')[0].style.backgroundColor='#DD9F4B';
        rky = "<div class='rankcnt' id='rankcnt8' value='2,0' style='margin:0px 0px 2px 1.3px;border-radius:0px 5px 5px 0px;background-color:#DD9F4B;color:white;text-align:center;line-height:26px;loat:left; width:100%; height:27px; '>你自己</div>";
      }
      for(let i = 0; i < e.length; i++){
        let obj = e[i];
        let avaStr = obj.boy.avator.split(";");
        let svg = Avataaars.create({
            width: 50,
            top: avaStr[0],
            hairColor: avaStr[1],
            clothing: avaStr[2],
            clothingColor: avaStr[3],
            eyes: avaStr[4],
            mouth: avaStr[5],
            skin:"yellow",
            background: avaStr[6]
        });
        let a = obj.boy.finalZanVsCai[0];
        let b = obj.boy.finalZanVsCai[1];
        let astr = a;
        let bstr = b;
        if(a){
          astr = "<span style='color:red'>"+a+"</span>";
        }
        if(b){
          bstr = "<span style='color:red'>"+b+"</span>";
        } 
        str += "<div class='item' id='item2'>";
        str += "<div class='userInfo'>";
        str += "<a class='interava'>";
        str += svg;
        str += "</a>";
        str += "<span class='username'>";
        str += obj.boy.name;
        str += "</span>";
        str += "</div>";
        str += "<div class='textInfo'>";
        str += obj.boy.introText;
        str += "</div><div class='Btns'>";
        str += "<div class='Btn'>赞&nbsp;<span class='cnt' id='up"+i+"' value="+obj.boy.finalZanVsCai[0]+">"+astr+"</span><button  class='btn17' style='float:right'>赞&nbsp;<img class='imgbtn' src='https://cdn.jsdelivr.net/gh/TianZonglin/tuchuang/imguu/up24.png'/></button></div>";
        str += "<div class='Btn'>踩&nbsp;<span class='cnt' id='down"+i+"' value="+obj.boy.finalZanVsCai[1]+">"+bstr+"</span><button  class='btn17c' style='float:right'>踩&nbsp;<img class='imgbtn' src='https://cdn.jsdelivr.net/gh/TianZonglin/tuchuang/imguu/down24.png'/></button></div>";
        str += "</div></div>";
        rky += "<div class='rankcnt' id='rankcnt"+i+"' value='"+obj.boy.finalZanVsCai[0]+","+obj.boy.finalZanVsCai[1]+"' style='margin:0px 0px 2px 1.3px;border-radius:0px 5px 5px 0px;background-color:#a2a4c6;color:#FFFFFF;text-align:center;line-height:26px;loat:left; width:100%; height:27px;'>"+obj.boy.name+"</div>";

      }
      $("#itor").html(str);
      $("#ranky").html(rky);
      
      
      var domList = $(".rankcnt").get();
      domList.sort(function(a,b){
       let zanA = parseInt($(a).attr("value").split(",")[0]);
       let caiA = parseInt($(a).attr("value").split(",")[1]);
       let zanB = parseInt($(b).attr("value").split(",")[0]);
       let caiB = parseInt($(b).attr("value").split(",")[1]);
       if(zanA > zanB) return -1;
       else if(zanA < zanB) return 1;
       else{
         if(caiA < caiB) return -1;
         else if(caiA > caiB) return 1;
         else return 0;
       }
      });

      
      $('#ranky').html(domList);
      $('.order').css("background-color","#a2a4c6");
      if($("#hidevalue").text().split(",")[0]!="normal"){
       $('.order')[$('.rankcnt').index($('#rankcnt8'))].style.backgroundColor='#DD9F4B';
      }
      
      if($("#hidevalue").text().split(",")[0]=="normal"){
        driversNormal();
      }else{
        driversTest();
      }
    });

  });
  
  
  
  
  
  $("#p14d").click(function(){
    
    $("#hidejsons").append("\"Page6Time\":\""+ (new Date().getTime() - $("#hidestart").val()) +"ms\",");
    $("#hidestart").val(new Date().getTime());
    
    $("#msgnum").text(0);
    GrowlNotification.closeAll();
      var mo=function(e){passive: false };
      document.body.style.overflow='';//出现滚动条
      document.removeEventListener("touchmove",mo,false);
    
    $("#p14_content").html("");
    $("#p15_content").show();
    setTimeout(function(){
      $("#p15_img").css("visibility","hidden");
      $("#p15_text").html("<span class='big'>... 连接成功，可以开始。</span>");
      $("#p15d").removeClass("disabled");
    },4000);
    $(".content2").css("visibility","hidden");
    $(".content2").css("margin-top","85px");
    $(".content0").css("visibility","hidden");
    $(".content0").css("margin-top","85px");
    setTimeout(() => window.scrollTo(0,0), 150);
  });
  $("#p15d").click(function(){
    
    $("#hidejsons").append("\"Page7Time\":\""+ (new Date().getTime() - $("#hidestart").val()) +"ms\",");
    $("#hidestart").val(new Date().getTime());
    
    $("#p15_content").html("");
    $("#2ndiv").load("itact.html");
    $(".content2").css("visibility","visible");
    $(".r3").css("visibility","visible");
    setTimeout(() => window.scrollTo(0,0), 150);
 
    
  });
  

 
  $(function(){
    
    
    
      $("#known").hide();
    
    
    
    
      $("#mb").hide();
      
      if($("#hidevalue").text().split(",")[0]=="normal"){
        $("#mb").show();
        $("#ybtn").hide();
        $("#ytext").css("user-select","none");
        $("#hiding").hide();
      }
    
      $(".sublocks").click(function () { 
        $(this).val($(this).text());
      })
    
    //let mtop = ["dreads01","frizzle","shaggyMullet","shaggy","shortCurly","shortFlat","shortRound","sides","shortWaved","theCaesarAndSidePart","theCaesar","bigHair","bob","bun","curly","curvy","dreads","frida","froAndBand","fro","longButNotTooLong","miaWallace","shavedSides","straightAndStrand","straight01","eyepatch","turban","hijab","hat","winterHat01"];
    //let hairColor = ["dauburn","black","blonde","brown","pastelPink","platinum","red","silverGray"];
    //let clothing = ["blazerAndShirt","blazerAndSweater","collarAndSweater","graphicShirt","hoodie","overall","shirtCrewNeck","shirtScoopNeck","shirtVNeck"];
    //let clothingColor = ["black","blue01","blue02","blue03","gray01","gray02","heather","pastelBlue","pastelGreen","pastelOrange","pastelRed","pastelYellow","pink","red","white"];
    //let eyes = ["squint","closed","cry","eyeRoll","happy","hearts","side","surprised","wink","winkWacky","xDizzy"];
    //let mouth = ["concerned","disbelief","eating","grimace","sad","screamOpen","serious","smile","tongue","twinkle","vomit"];
    //let background = ["#DD8FE4","#76D18D","#839BFF","#A59101","#8F69DB"];

    
    /*
      for(let i=0;i<54;i++){
        let t = mtop[Math.floor(Math.random() * mtop.length)];
        let h = hairColor[Math.floor(Math.random() * hairColor.length)];
        let c = clothing[Math.floor(Math.random() * clothing.length)];
        let cc = clothingColor[Math.floor(Math.random() * clothingColor.length)];
        let e = eyes[Math.floor(Math.random() * eyes.length)];
        let m = mouth[Math.floor(Math.random() * mouth.length)];
        let b = background[Math.floor(Math.random() * background.length)];
        let arr = [t,h,c,cc,e,m,b];
        var svg = Avataaars.create({
            width: 60,
            top: t,
            hairColor: h,
            clothing: c,
            clothingColor: cc,
            eyes: e,
            mouth: m,
            skin:"yellow",
            background: b
        });
        $("#avat").append("<a class='svgg' value='"+arr.join(";")+"'>"+svg+"</a>");

      }
    $("#reset").click(function(){
      $("#avat").html("");
      for(let i=0;i<54;i++){
        let t = mtop[Math.floor(Math.random() * mtop.length)];
        let h = hairColor[Math.floor(Math.random() * hairColor.length)];
        let c = clothing[Math.floor(Math.random() * clothing.length)];
        let cc = clothingColor[Math.floor(Math.random() * clothingColor.length)];
        let e = eyes[Math.floor(Math.random() * eyes.length)];
        let m = mouth[Math.floor(Math.random() * mouth.length)];
        let b = background[Math.floor(Math.random() * background.length)];
        let arr = [t,h,c,cc,e,m,b];
        var svg = Avataaars.create({
            width: 60,
            top: t,
            hairColor: h,
            clothing: c,
            clothingColor: cc,
            eyes: e,
            mouth: m,
            skin:"yellow",
            background: b
        });
        $("#avat").append("<a class='svgg' value='"+arr.join(";")+"'>"+svg+"</a>");

      }
    });
    
   */
    
    let aString = "longButNotTooLong;black;shirtCrewNeck;gray01;wink;smile;#A59101^theCaesarAndSidePart;black;collarAndSweater;black;squint;twinkle;#A59101^shortRound;black;hoodie;blue03;squint;grimace;#DD8FE4^shortRound;black;hoodie;red;happy;serious;#76D18D^theCaesar;black;collarAndSweater;pastelGreen;surprised;eating;#A59101^dreads01;black;hoodie;blue03;squint;serious;#DD8FE4^shortFlat;black;shirtCrewNeck;blue02;winkWacky;smile;#A59101^shaggy;black;collarAndSweater;blue02;squint;twinkle;#839BFF^straightAndStrand;black;hoodie;pastelGreen;happy;twinkle;#8F69DB^bigHair;black;shirtCrewNeck;gray01;surprised;eating;#839BFF^straight01;black;shirtCrewNeck;blue03;surprised;smile;#8F69DB^curvy;black;shirtVNeck;pastelOrange;surprised;twinkle;#8F69DB^bob;black;shirtScoopNeck;blue02;surprised;twinkle;#8F69DB^theCaesarAndSidePart;black;collarAndSweater;pastelBlue;winkWacky;eating;#8F69DB^longButNotTooLong;black;shirtCrewNeck;pink;happy;eating;#A59101^shortFlat;black;shirtCrewNeck;white;surprised;twinkle;#76D18D^longButNotTooLong;black;shirtScoopNeck;pastelRed;squint;serious;#839BFF^theCaesar;black;graphicShirt;pastelGreen;squint;twinkle;#76D18D^straightAndStrand;black;shirtScoopNeck;pastelBlue;surprised;smile;#839BFF^bob;black;overall;blue03;squint;grimace;#A59101^shaggy;black;shirtVNeck;white;squint;smile;#A59101^dreads01;black;shirtCrewNeck;pastelYellow;surprised;tongue;#839BFF^straightAndStrand;black;collarAndSweater;blue02;winkWacky;eating;#A59101^straightAndStrand;black;overall;black;winkWacky;tongue;#DD8FE4";
    let Temp = aString.split("^");
    for(let i=0;i<Temp.length;i++){
      aTemp = Temp[i].split(";");
      let t = aTemp[0];//mtop[Math.floor(Math.random() * mtop.length)];
      let h = aTemp[1];//hairColor[Math.floor(Math.random() * hairColor.length)];
      let c = aTemp[2];//clothing[Math.floor(Math.random() * clothing.length)];
      let cc = aTemp[3];//clothingColor[Math.floor(Math.random() * clothingColor.length)];
      let e = aTemp[4];//eyes[Math.floor(Math.random() * eyes.length)];
      let m = aTemp[5];//mouth[Math.floor(Math.random() * mouth.length)];
      let b = aTemp[6];//background[Math.floor(Math.random() * background.length)];
      let arr = [t,h,c,cc,e,m,b];
      var svg = Avataaars.create({
          width: 60,
          top: t,
          hairColor: h,
          clothing: c,
          clothingColor: cc,
          eyes: e,
          mouth: m,
          skin:"yellow",
          background: b
      });
      $("#avat").append("<a class='svgg' value='"+arr.join(";")+"'>"+svg+"</a>");

    }
    
    $("body").on("click", ".svgg",function(){
      console.log($(this).attr("value"));
      $(this).addClass("cheng");
      $(this).siblings().removeClass("cheng");
      if($("#p8a").val()!=""&&$("#p8b").val()!="点击选择"&&$("#p8c").val()!="点击选择"){
        $("#p9_text").html("<span style='color:green' class='big'>信息填写完毕，点击提交按钮！</span>");
        $("#p9d").removeClass("disabled");
      }
    });

    $("#p8q").click(function(){
      if($("#p8a").val()!=""&&$("#p8b").val()!="点击选择"&&$("#p8c").val()!="点击选择"&& $(".svgg").hasClass("cheng")){
        $("#p9_text").html("<span style='color:green' class='big'>信息填写完毕，点击提交按钮！</span>");
        $("#p9d").removeClass("disabled");
      }
    });

    $("#p8b").click(function(){
      if($("#p8a").val()!=""&&$("#p8b").val()!="点击选择"&&$("#p8c").val()!="点击选择"&& $(".svgg").hasClass("cheng")){
        $("#p9_text").html("<span style='color:green' class='big'>信息填写完毕，点击提交按钮！</span>");
        $("#p9d").removeClass("disabled");
      }
    });  

    $("#p8c").click(function(){
      if($("#p8a").val()!=""&&$("#p8b").val()!="点击选择"&&$("#p8c").val()!="点击选择"&& $(".svgg").hasClass("cheng")){
        $("#p9_text").html("<span style='color:green' class='big'>信息填写完毕，点击提交按钮！</span>");
        $("#p9d").removeClass("disabled");
      }
    });  
  
  
    /*
  $("#p17d").click(function(){
    

    
    $("#p17_content").hide();
    $("#p17_27").load("cball.html");
    $(".content2").css("visibility","hidden");
  })
 */
    
  
  });    
    
    
  
</script>