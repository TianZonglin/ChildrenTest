<style>
  #root {
    margin: 0 auto;
    width: 800px;
    column-count: 3;
    column-gap: 20px;

  }
  .rzoneside {
    width: 250px;
    background-color: #FF7878;
  }
  /* 每一列图片包含层 */
  .item {
    margin-bottom: 20px;
    /* 防止多列布局，分页媒体和多区域上下文中的意外中断 */
    break-inside: avoid;
    background: #fff;
    border-radius: 5px;
    padding:10px;
  }
  .item:hover {
    box-shadow: 3px 0px #a2a4c6;
  }
  /* 图片 */
  .itemImg {
    width: 100%;
    vertical-align: middle;
  }

  .interava {
    vertical-align: middle;
    width: 50px;
    float:left;
  
  }
  .username {
    margin-left: 5px;
    font-size: 20px;
    line-height: 55px;
  }
  
  .textInfo {
    margin-top: 10px;
    margin-bottom: 10px;
    font-size: 14px;
  }
  .Btn{
    border-top: 1px solid #d7d7d7;
    padding: 5px 0px;
    height:36px;
  }
  
  .btn17{
    font-family: inherit;
    font-size: 14px !important;  
    background: #a2a4c6;
    border: 1px solid #64669f;
    box-sizing: border-box;
    border-radius: 3px;
    padding: 0px 4px !important;  
    color: white;
    line-height:20px;
    
  }
  
  .imgbtn{
    height: 14px;
    vertical-align: middle;
    margin-bottom: 2px;
    
  }
  .cnt{
    background-color: #cdcdcd;
    padding: 0px 6px;
    border-radius: 3px;
    color: #fbff00;
  }
  .order{
    text-align:center;
    line-height:26px;
    loat:left; 
    width:100%; 
    height:30px; 
    border:1px black solid;
  }
</style>

<script>
 // alert(1);
</script>


<div class="rzoneside" id="p17_left" style=""></div>
<div class="rzone" id="p17_content" style="">

<p>page - 17</p><br>
  <div id="root">
    <div class="item">
      <div class="userInfo">
        <a class="interava"></a>
        <span class="username">PDD</span><span>你自己</span> 
      </div>
      <div class="textInfo">
        网站中有三个问题，请大家使用鼠标或键盘来回答问题。如果这用鼠标或键盘来回答问题。如果这用鼠标或键盘来回答问题。如果这用鼠标或键盘来回答问题。如果这三道题你都做对，网站会自动跳转到下一页；否则，网站会提示你做错，然后让你继续做，直到你都做对。
      </div>
      <div class="Btn"><div style="float:left">赞&nbsp;</div><span class="cnt" id="up8">0</span>
        <div style="float:right">踩&nbsp;<span class="cnt" id="down8">0</span></div></div>
 
    </div>



    <div id="itor"></div>

  </div>
    <div style="clear:both"></div>
  
  <div>剩余时间<br><span id="leftTime"></span></div>
  <div>
    <div style="margin:0px auto; width:200px; height:270px; border:1px black solid">

      <div style="float:left; width:65%; height:270px; border:1px black solid;background-color:#a2a4c6;color:#FFFFFF">
        <div class="order">第一名</div>
        <div style="text-align:center;line-height:26px;loat:left; width:100%; height:30px; border:1px black solid">第二名</div>
        <div style="text-align:center;line-height:26px;loat:left; width:100%; height:30px; border:1px black solid">第三名</div>
        <div style="text-align:center;line-height:26px;loat:left; width:100%; height:30px; border:1px black solid">第四名</div>
        <div style="text-align:center;line-height:26px;loat:left; width:100%; height:30px; border:1px black solid">第五名</div>
        <div style="text-align:center;line-height:26px;loat:left; width:100%; height:30px; border:1px black solid">第六名</div>
        <div style="text-align:center;line-height:26px;loat:left; width:100%; height:30px; border:1px black solid">第七名</div>
        <div style="text-align:center;line-height:26px;loat:left; width:100%; height:30px; border:1px black solid">第八名</div>
        <div style="text-align:center;line-height:26px;loat:left; width:100%; height:30px; border:1px black solid">第九名</div>
      </div>
      <div style="float:left; width:35%; height:270px; border:1px black solid" id="ranky">

      </div>
     
    </div>
  </div><br>
  <div id="mailbox"></div>
  <div id="popzan"></div>
  
    <button id="p17d" style="margin-left:390px;">继续</button>
<br><br>
</div>

<div class="rzoneside" id="p17_right" style=""></div>

<div id="p17_27"></div>

<script>
 
  $(".interava").html(Avataaars.create({width:50}));
  
  $("#p17d").click(function(){
    $("#p17_content").hide();
    $("#p17_27").load("cball.html");
  })
  

  
  
  
  
  
  
  
  
  
  
  
  
  $(function(){
    
     function rank() { 
       var domList = $(".rankcnt").get();
       domList.sort(function(a,b){
         var elOne = $(a).val();
         var elTwo = $(b).val();
         if(parseInt(elOne) > parseInt(elTwo)) return -1;
         if(parseInt(elOne) < parseInt(elTwo)) return 1;
         return 0;
       });
       
       $('#ranky').html(domList);
       console.log($('.rankcnt').index($('#rankcnt8')));
    }
    $.getJSON("fakers.json",function(e){

      let str = "";
      let rky = "<div value='0' class='rankcnt' id='rankcnt8' style='background-color:#DD9F4B;color:white;text-align:center;line-height:26px;loat:left; width:100%; height:30px; border:1px black solid'>PDD</div>";
      for(let i = 0; i < e.length; i++){
        let obj = e[i];
        let avaStr = obj.boy.avator.split(";");
 
        let svg = Avataaars.create({
            width: 50,
            top: avaStr[0],
            hairColor: avaStr[1],
            clothing: avaStr[2],
            clothingColor: avaStr[3],
            eyes: avaStr[4],
            mouth: avaStr[5],
            skin:"yellow",
            background: avaStr[6]
        });
        str += "<div class='item'>";
        str += "<div class='userInfo'>";
        str += "<a class='interava'>";
        str += svg;
        str += "</a>";
        str += "<span class='username'>";
        str += obj.name;
        str += "</span>";
        str += "</div>";
        str += "<div class='textInfo'>";
        str += obj.introText;
        str += "</div>";
        str += "<div class='Btn'>赞&nbsp;<span class='cnt' id='up"+i+"' value="+obj.boy.finalZanVsCai[0]+">0</span><button  class='btn17' style='float:right'>顶&nbsp;<img class='imgbtn' src='https://cdn.jsdelivr.net/gh/TianZonglin/tuchuang/imguu/up24.png'/></button></div>";
        str += "<div class='Btn'>踩&nbsp;<span class='cnt' id='down"+i+"' value="+obj.boy.finalZanVsCai[1]+">0</span><button  class='btn17' style='float:right'>踩&nbsp;<img class='imgbtn' src='https://cdn.jsdelivr.net/gh/TianZonglin/tuchuang/imguu/down24.png'/></button></div>";
        str += "</div>";
        rky += "<div value='0' class='rankcnt' id='rankcnt"+i+"' style='text-align:center;line-height:26px;loat:left; width:100%; height:30px; border:1px black solid'>"+obj.name+"</div>";

      }
      $("#itor").html(str);
      $("#ranky").html(rky);
 
      //开始自动fake
      for(let i = 0; i < e.length; i++){
        let o = e[i];
        
        
        if(o.optionToUser.opTime != 0){
          let iavaStr = o.boy.avator.split(";");
          let isvg = Avataaars.create({
              width: 50,
              top: iavaStr[0],
              hairColor: iavaStr[1],
              clothing: iavaStr[2],
              clothingColor: iavaStr[3],
              eyes: iavaStr[4],
              mouth: iavaStr[5],
              skin:"yellow",
              background: iavaStr[6]
          });
          if(o.optionToUser.option == "like"){
            setTimeout(function(){
              $("#up8").text(parseInt($("#up8").text())+1);
              $("#up8").css("color","rgb(255,160,0)");
              $("#up8").css("font-size","10px");
              $("#up8").css("font-weight","900");
              $("#rankcnt8").val(parseInt($("#up8").text())-parseInt($("#down8").text()));
              //Dreamer.success("("+o.name+")给你点了一个赞！",2000);
              GrowlNotification.notify({
                title: 'Well Done!',
                description: "("+o.name+")给你点了一个赞！",
                type: 'success',
                position: 'bottom-left',
                closeTimeout: 2000
              });
              rank();
              setTimeout(function(){
                $("#up8").css("color","red");
                $("#up8").css("font-size","16px");
              },500)
            }, 1000*parseInt(o.optionToUser.opTime));
          }else{
            setTimeout(function(){
              $("#down8").text(parseInt($("#down8").text())+1);
              $("#down8").css("color","rgb(255,160,0)");
              $("#down8").css("font-size","10px");
              $("#down8").css("font-weight","900");
              $("#rankcnt").val(parseInt($("#up8").text())-parseInt($("#down8").text()));
              rank();
              setTimeout(function(){
                $("#down8").css("color","red");
                $("#down8").css("font-size","16px");
              },500)
            }, 1000*parseInt(o.optionToUser.opTime));
          }
          
        }
 
        let upTime = o.boy.popTime[0].split(",");
        let downTime = o.boy.popTime[1].split(",");
        
        for(let zan = 0; zan < parseInt(o.boy.finalZanVsCai[0]); zan++){
          setTimeout(function(){
            $("#up"+i).text(parseInt($("#up"+i).text())+1);
            $("#up"+i).css("color","rgb(255,160,0)");
            $("#up"+i).css("font-size","10px");
            $("#up"+i).css("font-weight","900");
            $("#rankcnt"+i).val(parseInt($("#up"+i).text())-parseInt($("#down"+i).text()));
            rank();
            setTimeout(function(){
              $("#up"+i).css("color","red");
              $("#up"+i).css("font-size","16px");
            },500)
          }, 1000*parseInt(upTime[zan]));
        }
        for(let cai = 0; cai < parseInt(o.boy.finalZanVsCai[1]); cai++){
          setTimeout(function(){
            $("#down"+i).text(parseInt($("#down"+i).text())+1);
            $("#down"+i).css("color","rgb(255,160,0)");
            $("#down"+i).css("font-size","10px");
            $("#down"+i).css("font-weight","900");
            $("#rankcnt"+i).val(parseInt($("#up"+i).text())-parseInt($("#down"+i).text()));
            rank();
            setTimeout(function(){
              $("#down"+i).css("color","red");
              $("#down"+i).css("font-size","16px");
            },500)
          }, 1000*parseInt(downTime[cai]));
        }
        for(let msg = 0; msg < parseInt(o.messageToUser.length); msg++){
          let avaStr = o.boy.avator.split(";");
          let svg = Avataaars.create({
              width: 20,
              top: avaStr[0],
              hairColor: avaStr[1],
              clothing: avaStr[2],
              clothingColor: avaStr[3],
              eyes: avaStr[4],
              mouth: avaStr[5],
              skin:"yellow",
              background: avaStr[6]
          });

          setTimeout(function(){
            GrowlNotification.notify({
              description: svg+"("+o.name+")对你说：<span>"+o.messageToUser[msg].sendText+"</span><br>",
              type: 'info',
              position: 'bottom-right',
              closeTimeout: 3000
            });
          }, 1000*parseInt(o.messageToUser[msg].sendTime));
        }
      }
      
      
      let cutTime = 0.1 * 60;
      let summer = setInterval(counClock, 1000);

      function counClock() {
        let min = '';
        let sec = '';

        if (cutTime > 0) {
            min = Math.floor(cutTime / 60);
            sec = Math.floor(cutTime % 60);
            if (sec < 10) {
                sec = '0' + sec;
            };
            cutTime--;
            $("#leftTime").text(min + ':' + sec);
        } else {
            $("#leftTime").text('0:00');
            $(".btn17").addClass('disabled');
            clearInterval(summer);
        }
      }
    });
  });

</script>